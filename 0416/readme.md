디스크(보조)는 전부 반영구적장치이다.
물리적 변화가 없으면 거의 변화가 없다
rom에는 어떤 내용이 있냐
부트블락
파워스위치를 누르면 부트영역을 가지고온다 그리고 그걸 주기억장치로 옮김
수퍼 블록
전체 파일 시스템에 대한 정보저장 
inode갯수들도 여기 저장 블록들의수 사용가능블록이런것들전부
그럼 i-list는
각 파일을 나타내는 i노드들의 리스트
한블록은 약 40개의 inode로 구성
데이터블록
파일의 내용을 저장하기 위한 블록들

부트블록
수퍼블록
inode ilist
inode    .
inode    .     이파일의 내용이 어디 데이터블록인지 
inode    .     그것이 아이노드다
데이터블록
	.
	.         파일의 내용이 무엇인지는 데이터블록에 적
	.
이순임	
```

## inode란?
```
파일에 대한 모든 정보를 가지고 있음  파일 타입: 일반 파일, 디렉터리, 블록 장치, 문자 장치 등  파일 크기  사용권한  파일 소유자 및 그룹  접근 및 갱신 시간  데이터 블록에 대한 포인터(주소) 등

유닉스 기반의 자료구조임임

```
```
동적 i-노드 테이블 
커널 내의 자료 구조 
Open 된 파일들의 i-node를 저장하는 테이블 
i-노드 
하드 디스크에 저장되어 있는 파일에 대한 자료구조  한 파일에 하나의 i-node 
하나의 파일에 대한 정보 저장 
• 소유자, 크기
• 파일이 위치한 장치
• 파일 내용 디스크 블럭에 대한 포인터
```

```c
//상태 정보 : stat()  파일 하나당 하나의 i-노드가 있으며  i-노드 내에 파일에 대한 모든 상태 정보가 저장되어 있다
c

 #include #include int stat (const char *filename, struct stat *buf); int fstat (int fd, struct stat *buf); int lstat (const char *filename, struct stat *buf); 파일의 상태 정보를 가져와서 stat 구조체 buf에 저장한다. 성공하면 0, 실패하면 -1을 리턴한다.
```

```파일타입을 위한 매크로로 만들어버린 함수
일반 파일 S_ISREG()
디렉터리 파일 S_ISDIR() 
문자 장치 파일 S_ISCHR() 
블록 장치 파일 S_ISBLK() 
FIFO 파일 S_ISFIFO() 
소켓 S_ISSOCK() 
심볼릭 링크 S_ISLNK()
이렇게있음 
```

```
fd = open(“file”, O_RDONLY); //두 번 open
```

![[Pasted image 20240416174151.png]]출처:KYUNGSUNG UNIVERSITY SINCE 1955 시스템프로그래밍 김주헌교수님 강의중 ppt


```
HARD LINK
그냥 복사임 
원본이 변해도 얘는 안변함 사라져도 마찬가지

SYMBOLIC LINK
원본 파일을 참조하는 아이노드를 참조한느 파일
윈도우 바로가기와같다
즉 아이노드가 변하면 심볼릭링크여서 결과가 바로변함

```

###추가로 알아본 바
```
하드 링크 (Hard Link)
하드 링크는 파일 시스템에서 두 개 이상의 파일이 동일한 데이터 블록을 참조하도록 하는 방법입니다.
하드 링크와 원본 파일은 동일한 아이노드 번호를 가지며, 동일한 데이터 블록을 공유합니다. 따라서 하드 링크는 파일 복사본과는 다릅니다.

주요 특징:
동일한 아이노드: 하드 링크는 원본 파일과 동일한 아이노드를 참조합니다. 즉, 동일한 데이터 블록을 가리킵니다.
데이터 무결성: 원본 파일이나 하드 링크 파일 중 하나를 수정하면 다른 파일에도 동일하게 반영됩니다.
이는 동일한 데이터 블록을 공유하기 때문입니다.
파일 삭제: 원본 파일이나 하드 링크 파일 중 하나를 삭제해도, 나머지 파일은 여전히 접근 가능합니다.
파일 시스템에서 데이터 블록은 모든 하드 링크가 삭제되기 전까지 유지됩니다.
동일 파일 시스템: 하드 링크는 동일한 파일 시스템 내에서만 생성할 수 있습니다.
 서로 다른 파일 시스템 간에는 하드 링크를 만들 수 없습니다.
```
```
$ echo "Hello, World!" > original.txt
$ ln original.txt hardlink.txt
$ ls -li
이 명령은 original.txt와 hardlink.txt가 동일한 아이노드를 가지며 동일한 내용을 공유하도록 합니다.
```

```
심볼릭 링크 (Symbolic Link)
심볼릭 링크는 다른 파일을 참조하는 특수 파일입니다. 심볼릭 링크는 원본 파일의 경로를 가리키며, 원본 파일이 삭제되거나 이동되면 심볼릭 링크는 더 이상 유효하지 않게 됩니다.

주요 특징:
다른 아이노드: 심볼릭 링크는 원본 파일과 다른 아이노드를 가지며, 원본 파일의 아이노드를 참조하는 파일입니다.
윈도우 바로가기: 심볼릭 링크는 윈도우의 바로가기와 비슷합니다. 심볼릭 링크 자체는 실제 데이터를 포함하지 않으며, 원본 파일의 경로를 저장합니다.
원본 파일 영향: 원본 파일이 이동되거나 이름이 변경되면 심볼릭 링크는 유효하지 않게 됩니다.
다른 파일 시스템: 심볼릭 링크는 서로 다른 파일 시스템 간에도 생성할 수 있습니다.
$ echo "Hello, World!" > original.txt
$ ln -s original.txt symlink.txt
$ ls -li
이 명령은 symlink.txt가 original.txt의 경로를 가리키도록 합니다.
```

```
아이노드는 파일 시스템의 중요한 개념으로, 파일의 메타데이터를 저장하는 데이터 구조체입니다. 아이노드는 파일의 데이터 블록 위치, 파일 크기, 소유자 정보, 권한, 타임스탬프 등을 포함합니다. 아이노드는 파일 시스템에서 파일을 관리하고 접근하는 데 중요한 역할을 합니다.

주요 특징:
메타데이터 저장: 파일의 크기, 소유자, 권한, 생성/수정/접근 시간 등을 저장합니다.
데이터 블록 위치: 파일의 실제 데이터가 저장된 데이터 블록의 위치를 가리킵니다.
아이노드 번호: 각 파일과 디렉터리는 고유한 아이노드 번호를 가지며, 파일 시스템에서 이를 통해 파일을 식별합니다.
하드 링크: 여러 파일 이름이 동일한 아이노드를 참조할 수 있습니다. 이는 파일의 여러 이름(하드 링크)을 통해 동일한 데이터를 접근할 수 있음을 의미합니다.
아이노드 구조:
아이노드는 파일 시스템마다 다를 수 있지만, 일반적으로 다음과 같은 정보를 포함합니다:

파일 유형 및 권한 (예: 일반 파일, 디렉터리, 심볼릭 링크 등)
소유자와 그룹 ID
파일 크기
파일의 데이터 블록을 가리키는 포인터
생성, 수정, 접근 시간 타임스탬프
하드 링크 수
$ ls -i original.txt
이 명령은 original.txt 파일의 아이노드 번호를 출력합니다.

하드 링크와 심볼릭 링크는 파일 시스템에서 파일을 관리하고 효율적으로 사용할 수 있게 해주는 중요한 도구입니다.
 아이노드는 이러한 링크가 어떻게 작동하는지를 이해하는 데 중요한 역할을 합니다.
```
